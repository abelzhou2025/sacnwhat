# 📱 移动端测试指南

## 在浏览器中模拟手机使用场景

### 🚀 快速开始

#### 方法 1: 使用 Vite 开发服务器（推荐用于快速测试前端）

1. **启动开发服务器**
   ```bash
   npm run dev
   ```

2. **打开浏览器**
   - 访问: http://localhost:3000

3. **启用移动设备模拟**
   - 按 `F12` 打开开发者工具
   - 点击设备工具栏图标（或按 `Cmd+Shift+M` Mac / `Ctrl+Shift+M` Windows）
   - 选择设备预设（iPhone, iPad, Android 等）
   - 或自定义屏幕尺寸

4. **测试功能**
   - 📸 测试拍照功能
   - 📤 测试图片上传
   - 🔄 测试批量上传
   - 📝 测试文本提取
   - 🗑️ 测试右滑删除
   - 📚 测试扫描历史

#### 方法 2: 使用 Netlify Dev（完整功能，包括 Functions）

1. **启动 Netlify Dev**
   ```bash
   npm run dev:netlify
   ```

2. **打开浏览器**
   - 访问显示的 URL（通常是 http://localhost:8888）

3. **启用移动设备模拟**
   - 按 `F12` 打开开发者工具
   - 点击设备工具栏图标
   - 选择移动设备

4. **测试完整流程**
   - 所有功能都可以测试，包括 OCR API 调用

### 📱 推荐的测试设备预设

#### iPhone 测试
- iPhone 12 Pro / 13 Pro / 14 Pro
- iPhone SE（小屏幕测试）
- iPhone 14 Pro Max（大屏幕测试）

#### Android 测试
- Pixel 5
- Samsung Galaxy S20
- 自定义尺寸（如 375x667, 414x896）

### 🧪 测试清单

#### 基础功能
- [ ] **拍照功能**
  - 点击"Take Photo"按钮
  - 选择相机或上传
  - 预览图片是否正确显示

- [ ] **上传功能**
  - 点击"Upload Image"按钮
  - 选择单张图片
  - 选择多张图片（批量上传）

- [ ] **图片预览**
  - 单张图片预览
  - 多张图片预览
  - 图片显示是否正常

- [ ] **OCR 提取**
  - 点击"Extract Text"
  - 等待处理完成
  - 查看提取的文本是否正确

#### 高级功能
- [ ] **批量处理**
  - 上传多张图片
  - 查看进度条
  - 确认所有图片都处理完成

- [ ] **扫描历史**
  - 查看历史记录列表
  - 点击查看详情
  - 编辑文本内容

- [ ] **删除功能**
  - 右滑删除扫描记录
  - 确认删除成功

- [ ] **文本编辑**
  - 在结果页面编辑文本
  - 确认修改已保存

#### 移动端特定测试
- [ ] **触摸操作**
  - 按钮点击响应
  - 滑动删除手势
  - 图片缩放（如果需要）

- [ ] **响应式布局**
  - 不同屏幕尺寸下的布局
  - 横屏/竖屏切换
  - 文本是否可读

- [ ] **性能测试**
  - 大图片处理速度
  - 批量处理性能
  - 页面滚动流畅度

### 🔍 调试技巧

#### 1. 查看移动端 Console
- 打开开发者工具
- 切换到 Console 标签
- 查看错误和日志

#### 2. 网络请求监控
- 打开 Network 标签
- 查看 API 调用
- 检查请求/响应

#### 3. 触摸事件调试
- 在 Console 中输入：
  ```javascript
  // 监听触摸事件
  document.addEventListener('touchstart', (e) => console.log('Touch:', e));
  ```

#### 4. 查看本地存储
- 在 Application/Storage 标签
- 查看 localStorage
- 确认扫描历史已保存

### 📊 测试场景

#### 场景 1: 单张图片扫描
1. 打开应用
2. 点击"Take Photo"或"Upload Image"
3. 选择一张包含文字的图片
4. 点击"Extract Text"
5. 查看结果
6. 编辑文本
7. 点击"Done"返回

#### 场景 2: 批量扫描
1. 打开应用
2. 点击"Upload Image"
3. 选择 3-5 张图片
4. 查看预览
5. 点击"Extract Text from X Images"
6. 观察进度条
7. 查看所有结果

#### 场景 3: 扫描历史管理
1. 完成几次扫描
2. 返回主页面
3. 查看历史记录列表
4. 点击查看详情
5. 右滑删除一条记录
6. 确认删除成功

#### 场景 4: 连续扫描
1. 完成一次扫描
2. 点击"Scan with Camera"或"Upload Another"
3. 继续扫描下一张
4. 重复多次
5. 查看所有历史记录

### 🐛 常见问题测试

#### 问题 1: 图片太大
- 测试上传大尺寸图片（>5MB）
- 确认压缩是否正常工作
- 检查处理时间

#### 问题 2: 网络慢
- 使用浏览器网络节流（Network Throttling）
- 设置为 3G 或 Slow 3G
- 测试加载和响应

#### 问题 3: API 错误
- 模拟 API 失败（Network 标签 → Offline）
- 查看错误提示
- 测试重试功能

#### 问题 4: 存储空间
- 多次扫描创建大量历史
- 检查 localStorage 使用
- 测试删除功能

### 💡 移动端优化检查

- [ ] 按钮大小适合触摸（至少 44x44px）
- [ ] 文本大小可读（至少 16px）
- [ ] 间距合理，不会误触
- [ ] 加载状态清晰
- [ ] 错误提示友好
- [ ] 支持横屏和竖屏
- [ ] 滑动操作流畅

### 🚀 实际设备测试

在浏览器测试后，建议在实际设备上测试：

1. **部署到 Netlify**
   ```bash
   git push
   ```

2. **在手机上访问**
   - 打开 Netlify 提供的 URL
   - 测试真实相机功能
   - 测试真实网络环境

3. **测试真实场景**
   - 拍摄文档
   - 拍摄手写笔记
   - 测试不同光线条件

### 📝 测试记录模板

```
测试日期: __________
设备: [ ] iPhone [ ] Android [ ] 其他: _______
浏览器: [ ] Chrome [ ] Safari [ ] Firefox [ ] 其他: _______

功能测试:
- 拍照: [ ] 通过 [ ] 失败 - 备注: __________
- 上传: [ ] 通过 [ ] 失败 - 备注: __________
- OCR: [ ] 通过 [ ] 失败 - 备注: __________
- 历史: [ ] 通过 [ ] 失败 - 备注: __________
- 删除: [ ] 通过 [ ] 失败 - 备注: __________

问题记录:
1. __________
2. __________
```

### 🎯 下一步

- 完成所有测试项
- 记录发现的问题
- 修复问题后重新测试
- 在实际设备上验证

